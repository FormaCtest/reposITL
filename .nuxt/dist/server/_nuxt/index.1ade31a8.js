import{_ as j}from"./section_window.67ebd6b3.js";import{_ as E}from"./changing_access.02a54b60.js";import{_ as V,a as x}from"./chain.e6a16fc3.js";import{n as y}from"../server.mjs";import{openBlock as _,createElementBlock as l,createElementVNode as s,createVNode as k,unref as w,createBlock as A,createCommentVNode as X,toDisplayString as c,createTextVNode as h,Fragment as g,renderList as T}from"vue";import{a as D,u as S,b as B,c as p}from"./private.7b9915f8.js";import{u as P}from"./SectionStore.63b2f3c7.js";import{u as U}from"./ArticleStore.7b5f5aed.js";import{_ as z}from"./pencil.90349105.js";import{_ as G}from"./folder-max.65e98ccd.js";import{_ as I}from"./fold_full.ee363041.js";import{_ as L}from"./_plugin-vue_export-helper.a1a6add7.js";import"./NavbarStore.1846ce18.js";import"./folder.dc2c6812.js";import"#internal/nitro";import"vue-router";const N={setup(){const e=P(),t=D(),o=S(),a=U(),i=B();var r="";async function m(){const u=new URL("https://api.wiki.itl.systems/team/section/edit"),f=new URL("https://api.wiki.itl.systems/team/section"),n={team_id:o.session_TeamID,section_id:e.current_section};Object.keys(n).forEach(d=>u.searchParams.append(d,n[d])),Object.keys(n).forEach(d=>f.searchParams.append(d,n[d]));const v={Authorization:"Bearer "+t.token,"Content-Type":"application/json",Accept:"application/json"},b=await p(u,{method:"GET",headers:v},"$fJ8ooyZyju"),C=await p(f,{method:"GET",headers:v},"$NoVdoWyjtF");return[b,C]}return{sect:e,priv:t,teams:o,block_2:r,give_data:m,article:a,user:i}},created(){setTimeout(()=>{this.info_items()},500),setTimeout(()=>{this.give_data().then(e=>{this.analyse_the_path(e[1]),this.content_section=e[0].data._rawValue.data.section.content})},500),this.info_pr(),this.add_p()},data(){return{mass_sec:{},fullname:"",dateXXX:"",list_items:[],list_section:[],content_section:"",link_sect:"",chain:!1,done:!1}},methods:{async add_p(){const e=new URL("https://api.wiki.itl.systems/team/abilities"),t={team_id:this.teams.session_TeamID,entity_id:this.sect.current_section,entity_type:"section"};Object.keys(t).forEach(a=>e.searchParams.append(a,t[a]));const o={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"};p(e,{method:"GET",headers:o},"$lGi14KNwg4")},async info_pr(){const e=new URL("https://api.wiki.itl.systems/team/employees/get");let t={team_id:this.teams.session_TeamID,employee_id:this.user.userId};Object.keys(t).forEach(a=>e.searchParams.append(a,t[a]));const o={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"};p(e,{method:"GET",headers:o},"$ekjUECKIbn")},analyse_the_path(e){if(e.data._rawValue.data.section.level===1)this.link_sect=this.sect.current_name;else for(let t=0;t<=e.data._rawValue.data.section.breadcrumbs.length-1;t++)t===0?this.link_sect+=e.data._rawValue.data.section.breadcrumbs[0].name:this.link_sect+="/"+e.data._rawValue.data.section.breadcrumbs[t].name},edit_section(e,t){this.sect.Edit_score(e,t,"section")},tp(e,t){this.sect.close_sect(),this.sect.vie_sect(e,t),window.location.href="/"+this.teams.session_TeamCode+".itl.wiki/section/"+e},import_date(e){var t=["\u044F\u043D\u0432\u0430\u0440\u044F","\u0444\u0435\u0432\u0440\u0430\u043B\u044F","\u043C\u0430\u0440\u0442\u0430","\u0430\u043F\u0440\u0435\u043B\u044F","\u043C\u0430\u044F","\u0438\u044E\u043D\u044F","\u0438\u044E\u043B\u044F","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F","\u043E\u043A\u0442\u044F\u0431\u0440\u044F","\u043D\u043E\u044F\u0431\u0440\u044F","\u0434\u0435\u043A\u0430\u0431\u0440\u044F"];let o=new Date(e);return o=o.getDay()+" "+t[o.getMonth()]+" "+o.getHours()+":"+o.getMinutes(),o},async info_items(){const e=new URL("https://api.wiki.itl.systems/team/section"),t={team_id:this.teams.session_TeamID,section_id:this.sect.current_section};Object.keys(t).forEach(m=>e.searchParams.append(m,t[m]));const o={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"},a=await p(e,{method:"GET",headers:o},"$05929PH4z3");this.mass_sec=a.data._rawValue.data.section;for(var i=0;i<=this.mass_sec.items.length-1;i++)this.mass_sec.items[i].status_id===3&&this.list_items.push(this.mass_sec.items[i]);this.list_section=this.mass_sec.child,this.sect.vie_sect(this.mass_sec.id,this.mass_sec.name),this.fullname=this.mass_sec.creator.fullname;var r=["\u044F\u043D\u0432\u0430\u0440\u044F","\u0444\u0435\u0432\u0440\u0430\u043B\u044F","\u043C\u0430\u0440\u0442\u0430","\u0430\u043F\u0440\u0435\u043B\u044F","\u043C\u0430\u044F","\u0438\u044E\u043D\u044F","\u0438\u044E\u043B\u044F","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F","\u043E\u043A\u0442\u044F\u0431\u0440\u044F","\u043D\u043E\u044F\u0431\u0440\u044F","\u0434\u0435\u043A\u0430\u0431\u0440\u044F"];this.dateXXX=new Date(this.mass_sec.updated_at),this.dateXXX=this.dateXXX.getDate()+" "+r[this.dateXXX.getMonth()]+" "+this.dateXXX.getHours()+":"+this.dateXXX.getMinutes()}}},R=s("img",{src:x},null,-1),F=[R],M=s("img",{src:z},null,-1),O=[M],H={class:"hhtii"},K={class:"tyurie3"},W={class:"decf5"},J={class:"ert83"},Z={class:"yu89"},q={class:"ert83"},Q={class:"yu89"},Y={key:1,class:"sect_cov"},$={class:"ioko0"},tt={class:"block_it"},et=s("img",{class:"fold",src:G},null,-1),st={class:"no"},it=["onClick"],nt={class:"ob"},ot=["onClick"],at=s("img",{class:"file",src:I},null,-1),ct={class:"no"},rt={class:"nm"},_t={class:"ob"};function mt(e,t,o,a,i,r){const m=j,u=E,f=V;return _(),l("div",null,[s("div",null,[k(m),s("div",{onClick:t[0]||(t[0]=n=>i.chain=!i.chain),class:"chain"},F),s("div",{onClick:t[1]||(t[1]=n=>w(y)("/"+a.teams.session_TeamCode+".itl.wiki/section/"+a.sect.current_section+"/edit")),class:"iopn"},O),k(u,{type_entity:2,id_entity:a.sect.current_section,onClick:t[2]||(t[2]=n=>i.chain=!1),onFor_whom:r.edit_section,left:1200,top:42},null,8,["id_entity","onFor_whom"]),i.chain?(_(),A(f,{key:0,left:1300,top:90,left_arrw:385,type_entity:2,id_entity:this.sect.current_section},null,8,["id_entity"])):X("",!0),s("div",H,c(i.link_sect),1),s("div",K,c(a.sect.current_name),1),s("div",W,[s("div",J,[h(" \u0410\u0432\u0442\u043E\u0440:\xA0"),s("div",Z,c(i.fullname),1),h("\xA0 ")]),s("div",q,[h(" \xA0\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E:\xA0 "),s("div",Q,c(i.dateXXX),1)])]),i.content_section.length>=1&&i.content_section!=="."?(_(),l("div",Y,[s("p",null,c(i.content_section),1)])):X("",!0),s("div",$,[(_(!0),l(g,null,T(i.list_section,n=>(_(),l("div",tt,[et,s("div",st,[s("div",{onClick:v=>r.tp(n.id,n.name),class:"nm"},c(n.name),9,it),s("div",nt,[h(" \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E:\xA0"),s("span",null,c(r.import_date(n.updated_at)),1)])])]))),256)),(_(!0),l(g,null,T(i.list_items,n=>(_(),l("div",{onClick:v=>{a.article.use_article(n.name,n.id),w(y)("/"+this.teams.session_TeamCode+".itl.wiki/section/"+this.sect.current_section+"/items/"+n.id)},class:"block_it"},[at,s("div",ct,[s("div",rt,c(n.name),1),s("div",_t,[h(" \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E:\xA0"),s("span",null,c(r.import_date(n.updated_at)),1)])])],8,ot))),256))])])])}const Et=L(N,[["render",mt]]);export{Et as default};
//# sourceMappingURL=index.1ade31a8.js.map

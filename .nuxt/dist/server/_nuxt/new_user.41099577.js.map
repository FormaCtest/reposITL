{"version":3,"file":"new_user.41099577.js","sources":["../../../../components/Add_users.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <div class=\"linE\">\r\n      <div >Создание компании</div>\r\n      <div class=\"chevrol\"><img src=\"@/assets/resourses/icons/chevrol.png\"></div>\r\n      <div class=\"soz\">Добавление пользователей</div>\r\n      </div>\r\n      <div class=\"osn\"><span>Основные достоинства itl.wiki раскрываются, когда вы работаете в связке с другими участниками команды и обсуждаете проекты</span></div>\r\n     <SelectStatus :top=\"350\" :left=\"470\" @add_role=\"save_role\"/>\r\n     <div class=\"in im\"><InputMail @create=\"MailValue\" :left=\"0\" :width=\"620\" :error=\"error\" :placeholder=\"'Введите email адреса через запятую или пробел'\"/></div>\r\n     <div class=\"by\"><p>Нажимая кнопку «Пригласить пользователей» вы принимаете <a href=\"#\">Условия обслуживания</a> в отношении продуктов ITL и соглашаетесь с <a href=\"#\">Политикой конфиденциальности.</a></p></div>\r\n     <button @click.prevent=\"test\" class=\"button\" :style=\"[{top:'540px'},{left: '470px'},{width: '250px'}]\"><span @click=\"Add_users\" class=\"create_text\">Пригласить пользователей</span></button>\r\n    </div> \r\n</template> \r\n<script>\r\nimport { useThePrivateStore } from '~~/stores/private';\r\nimport { useTeamsStore } from '~~/stores/Teams';\r\nexport default {\r\n  setup() {\r\n   const priv = useThePrivateStore()\r\n   const teams = useTeamsStore()\r\n   return {priv, teams}\r\n  },\r\n  data(){\r\n    return{\r\n      error: false,\r\n      email: '',\r\n      role: '',\r\n      Array_email: []\r\n    }\r\n  },\r\n  methods:{\r\n    async Add_users(){\r\n        this.email = (this.email.trim()).replaceAll(' ',',')\r\n        this.Array_email = this.email.split(',')\r\n        for (var i = 0; i< this.Array_email.length; i++) {\r\n            if ((this.Array_email[i].search(/[A-Z0-9._%+-]+@[A-Z0-9-]+\\.[A-Z]{2,4}/igm))===-1) {\r\n                this.error=true\r\n                break;\r\n            }else {if (this.Array_email.length-i===1) {   //если переданы правильно адресса, срабатывает запрос\r\n                const url = new URL(\r\n            \"https://api.wiki.itl.systems/team/employees/add\"\r\n            );\r\n\r\n            const headers = {\r\n           \"Authorization\": \"Bearer \"+this.priv.token,\r\n           \"Content-Type\": \"application/json\",\r\n           \"Accept\": \"application/json\",\r\n           };\r\n\r\n           let body = {\r\n           \"team_id\": this.teams.session_TeamID,\r\n           \"role\": this.role,\r\n           \"emails\": this.Array_email\r\n            };\r\n\r\n           const {error} = await useFetch(url, {\r\n           method: \"POST\",\r\n           headers,\r\n           body: JSON.stringify(body),\r\n           })\r\n        \r\n            }\r\n            \r\n            }\r\n        }\r\n        },\r\n        save_role(role) {\r\n         this.role = role\r\n        },\r\n      MailValue(link){\r\n        this.email=link\r\n        this.error=false\r\n      }\r\n\r\n  }\r\n}\r\n</script>\r\n<style scored lang=\"scss\">\r\n@import \"@/assets/scss/style.scss\";\r\n @import \"@/assets/scss/input.scss\";\r\n @import \"@/assets/scss/button.scss\";\r\n @import \"@/assets/scss/font_family.scss\";\r\n .by{\r\n  position: absolute;\r\n  width: 380px;\r\n  height: 54px;\r\n  font-family: \"Roboto_regular\";\r\n  font-size: 11px;\r\n  color: #999999;\r\n  top: 440px;\r\n  line-height: 1.5;\r\n  left: 470px;\r\n}\r\n.by a{\r\n  color: #999999;\r\n}\r\n .im{\r\n    left: 470px;\r\n    top: 200px;\r\n    width: 620px;\r\n    input{\r\n  font-size: 20px;\r\n}\r\n }\r\n .osn{\r\n    position: absolute;\r\n    width: 620px;\r\n    height: 30px;\r\n    left: 470px;\r\n    top: 130px;\r\n    span{\r\n        font-size: 12px;\r\n        color: rgb(26, 26, 26);\r\n        font-family: 'Roboto_medium';\r\n    }\r\n }\r\n .linE{\r\n    display: flex;\r\n    flex-wrap: nowrap;\r\n    justify-content: space-between;\r\n    position: absolute;\r\n    left: 470px;\r\n    top: 32px;\r\n    width: 600px;\r\n    height: 50px;\r\n  }\r\n  .chevrol{\r\n    position: relative;\r\n    top: 3px;\r\n  }\r\n  .soz{\r\n    color: rgb(12, 12, 12);\r\n  }\r\n  .linE{\r\n  font-family:'Roboto_regular';\r\n  font-size: 24px;\r\n  color: #CCCCCC;\r\n  vertical-align: middle;\r\n  line-height: 50px;\r\n  .reg{\r\n    color: rgb(12, 12, 12);\r\n  }\r\n}\r\n</style>"],"names":["_sfc_main","priv","teams","i","url","body","useFetch","headers","role","link","_hoisted_3","_createElementVNode","$options","$data","_cache","_withModifiers","args","_ctx","_normalizeStyle"],"mappings":"qeAiBA,MAAAA,EAAA,CACE,OAAA,mBAGC,MAAA,CAAA,KAAAC,EAAA,MAAAC,CAAA,GAED,MAAA,CACE,MAAA,UAEE,MAAA,GACA,KAAA,iBAEF,GAEF,QAAA,CACE,MAAA,WAAA,kDAEI,KAAA,YAAA,KAAA,MAAA,MAAA,GAAA,EACA,QAAAC,EAAA,EAAAA,EAAA,KAAA,YAAA,OAAAA,IACI,GAAA,KAAA,YAAAA,GAAA,OAAA,0CAAA,IAAA,GAAA,CACI,KAAA,MAAA,QAEJ,SAAA,KAAA,YAAA,OAAAA,IAAA,EAAA,CACI,MAAAC,EAAA,IAAA,0DAKL,cAAA,UAAA,KAAA,KAAA,MACA,eAAA,8CAIA,IAAAC,EAAA,CACA,QAAA,KAAA,MAAA,eACA,KAAA,KAAA,8BAIA,MAAAC,EAAAF,EAAA,eAEA,QAAAG,wCAIC,GAKJ,UAAAC,EAAA,cAGF,UAAAC,EAAA,CACE,KAAA,MAAAA,EACA,KAAA,MAAA,EACF,CAEJ,CACF,s+BAnEUC,EAAA,CAAA,MAAA,OAAA,0VACsEC,EAAA,IAAA,CAAA,KAAA,GAAA,EAAA,qHAAA,yNAAgFA,EAAA,IAAA,CAAA,KAAA,GAAA,EAAA,sKAAA,+EAF5I,IAAA,IAAW,KAAA,IAAY,WAAAC,EAAA,kCACtCD,EAAA,MAAAD,EAAA,MAA+B,SAAAE,EAAA,UAAoB,KAAA,EAAU,MAAA,IAAa,MAAAC,EAAA,MAAe,YAAA,wQAEhF,QAAAC,EAAA,KAAAA,EAAA,GAAAC,EAAA,IAAAC,IAAAC,EAAA,MAAAA,EAAA,KAAA,GAAAD,CAAA,EAAA,CAAA,SAAA,CAAA,GAAqB,MAAA,SAAgB,MAAAE,EAAA,CAAA,CAAA,IAAA,OAAA,EAAA,CAAA,KAAA,OAAA,EAAA,CAAA,MAAA,OAAA,CAAA,CAAA,cAAgE,QAAAJ,EAAA,KAAAA,EAAA,GAAA,IAAAE,IAAAJ,EAAA,WAAAA,EAAA,UAAA,GAAAI,CAAA,GAAkB,MAAA"}
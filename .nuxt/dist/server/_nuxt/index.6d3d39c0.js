import{_ as y}from"./changing_access.02a54b60.js";import{n as u}from"../server.mjs";import{openBlock as _,createElementBlock as d,createCommentVNode as m,Fragment as g,renderList as k,createElementVNode as a,unref as h,toDisplayString as l,createTextVNode as f,createVNode as T}from"vue";import{u as w,a as b,b as S,c as p}from"./private.7b9915f8.js";import{u as x}from"./ArticleStore.7b5f5aed.js";import{u as C}from"./SectionStore.63b2f3c7.js";import{_ as N}from"./fold_full.ee363041.js";import{_ as j}from"./pencil.90349105.js";import{_ as A}from"./_plugin-vue_export-helper.a1a6add7.js";import"#internal/nitro";import"vue-router";const X={setup(){const r=w(),s=C(),n=x(),i=b(),e=S();return{teams:r,sect:s,article:n,priv:i,users:e}},data(){return{list_items:[],mass_sec:!1,good:!1}},created(){setTimeout(()=>{this.users.TakingData()},500),setTimeout(()=>{this.info_items()},1e3)},methods:{async edit_pr(r,s,n,i){const e=new URL("https://api.wiki.itl.systems/team/abilities/edit"),c={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"};let o={team_id:this.teams.session_TeamID,entity_type:n,entity_id:i,permission:r};if(typeof s=="object")for(var t=0;t<=s.length-1;t++)o.user_id=s[t].id,p(e,{method:"POST",headers:c,body:JSON.stringify(o)},"$4Y7rgtIl2w");else o.user_id=s,p(e,{method:"POST",headers:c,body:JSON.stringify(o)},"$nRvNl2v7zN")},async info_items(){const r=new URL("https://api.wiki.itl.systems/team/section/sections"),s={team_id:this.teams.session_TeamID};Object.keys(s).forEach(t=>r.searchParams.append(t,s[t]));const n={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"},{data:i}=await p(r,{method:"GET",headers:n},"$ggprLMbcH9");for(var e=[],c=0;c<=i.value.data.length-1;c++)e.push(i.value.data[c].items);e=e.flat();for(var o=0;o<=e.length-1;o++)e[o].created_by===this.users.userId&&this.list_items.push(e[o]);this.good=!0},edit_date(r){var s=["\u044F\u043D\u0432\u0430\u0440\u044F","\u0444\u0435\u0432\u0440\u0430\u043B\u044F","\u043C\u0430\u0440\u0442\u0430","\u0430\u043F\u0440\u0435\u043B\u044F","\u043C\u0430\u044F","\u0438\u044E\u043D\u044F","\u0438\u044E\u043B\u044F","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F","\u043E\u043A\u0442\u044F\u0431\u0440\u044F","\u043D\u043E\u044F\u0431\u0440\u044F","\u0434\u0435\u043A\u0430\u0431\u0440\u044F"];let n=new Date(r);var i=n.getDate()+" "+s[n.getMonth()]+" "+n.toTimeString().slice(0,5);return i}}},O={key:0,class:"no_work"},B=a("span",null,"\u041C\u043E\u0438 \u0440\u0430\u0431\u043E\u0442\u044B",-1),D={key:0},E={class:"items_block"},F=a("img",{class:"file",src:N},null,-1),L={class:"no"},P={class:"nm"},V=["onClick"],z={key:0,class:"status"},R={class:"ob"},U=["onClick"],J=a("img",{src:j},null,-1),M={class:"setur"};function G(r,s,n,i,e,c){const o=y;return _(),d("div",null,[e.good?(_(),d("div",O,[B,e.list_items?m("",!0):(_(),d("p",D,"\u041F\u043E\u0445\u043E\u0436\u0435, \u0432\u044B \u0435\u0449\u0435 \u043D\u0435 \u0441\u043E\u0437\u0434\u0430\u043B\u0438 \u043D\u0438 \u043E\u0434\u043D\u043E\u0439 \u0437\u0430\u043F\u0438\u0441\u0438")),e.list_items?(_(!0),d(g,{key:1},k(e.list_items,t=>(_(),d("div",E,[F,a("div",L,[a("div",P,[a("div",{onClick:v=>{i.article.use_article(t.name,t.id),h(u)("/"+this.teams.session_TeamCode+".itl.wiki/my_works/"+t.id)},class:"ik"},l(t.name),9,V),t.status_id<3?(_(),d("div",z,l(t.status_id===1?"\u0447\u0435\u0440\u043D\u043E\u0432\u0438\u043A":"\u043D\u0430 \u043C\u043E\u0434\u0435\u0440\u0430\u0446\u0438\u0438"),1)):m("",!0)]),a("div",R,[f(" \u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u043E:\xA0"),a("span",null,l(c.edit_date(t.created_at)),1)]),a("div",{onClick:v=>{i.article.use_article(t.name,t.id),h(u)("/"+i.teams.session_TeamCode+".itl.wiki/my_works/"+t.id+"/edit")},class:"edits"},[J,f(" \u041F\u0440\u0430\u0432\u043A\u0430 ")],8,U),a("div",M,[T(o,{type_entity:"article",id_entity:t.id,onFor_whom:c.edit_pr,left:700,top:8,text:"\u0423 \u0432\u0441\u0435\u0445"},null,8,["id_entity","onFor_whom"])])])]))),256)):m("",!0)])):m("",!0)])}const st=A(X,[["render",G]]);export{st as default};
//# sourceMappingURL=index.6d3d39c0.js.map

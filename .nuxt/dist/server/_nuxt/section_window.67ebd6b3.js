import{n as p}from"../server.mjs";import{openBlock as r,createElementBlock as _,createElementVNode as s,toDisplayString as h,withDirectives as x,vModelText as w,Fragment as m,renderList as u,normalizeClass as v,createCommentVNode as f,unref as g}from"vue";import{a as y,u as T,c as k}from"./private.7b9915f8.js";import{u as b}from"./SectionStore.63b2f3c7.js";import{u as S}from"./NavbarStore.1846ce18.js";import{u as E}from"./ArticleStore.7b5f5aed.js";import{_ as C}from"./folder.dc2c6812.js";import{a as A}from"./changing_access.02a54b60.js";import{_ as j}from"./_plugin-vue_export-helper.a1a6add7.js";const I={setup(){const n=S(),o=b(),d=y(),e=T(),i=E();return{fun:n,sect:o,priv:d,teams:e,article:i}},mounted(){setTimeout(()=>{this.info_items().then(()=>this.info_article())},1e3)},data(){return{list_section:[],list_items:[],sort_section:[],index_sort:"",list_child:[],list_child2:[],level_section:[],mass_child:[]}},methods:{tp(n,o){this.sect.vie_sect(n,o),window.location.href="/"+this.teams.session_TeamCode+".itl.wiki/section/"+n},SEARCH(){this.index_sort===""?this.sort_section=this.list_section:this.sort_section=this.list_section.filter(n=>n.name===this.index_sort)},async info_child2000(n){},async info_items(){const n=new URL("https://api.wiki.itl.systems/team/section"),o={team_id:this.teams.session_TeamID,section_id:this.sect.current_section};Object.keys(o).forEach(t=>n.searchParams.append(t,o[t]));const d={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"},{data:e,error:i}=await k(n,{method:"GET",headers:d},"$QaKQLLJM1L");this.list_child=e.value.data.section.child,this.level_section=e.value.data.section.level;for(var c=0;c<=e.value.data.section.items.length-1;c++)e.value.data.section.items[c].status_id===3&&this.list_items.push(e.value.data.section.items[c])},async info_article(){const n=new URL("https://api.wiki.itl.systems/team/section/sections"),o={team_id:this.teams.session_TeamID};Object.keys(o).forEach(e=>n.searchParams.append(e,o[e]));const d={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"};await k(n,{method:"GET",headers:d},"$kcZMF7zSBh").then(e=>{if(this.list_section=e.data._rawValue.data,this.level_section===1){for(let i=0;i<=this.list_section.length-1;i++)if(this.list_section[i].id===this.sect.current_section){[this.list_section[0],this.list_section[i]]=[this.list_section[i],this.list_section[0]],this.sort_section=this.list_section;break}}else this.sort_section=this.list_section;for(let i=0;i<=this.list_section.length-1;i++)this.list_child2.push(this.list_section[i].children);this.list_child2=this.list_child2.flat()})}}},L={class:"curtain"},z={class:"search2"},B={tabindex:"1",class:"current_section"},R=s("img",{src:C},null,-1),V={class:"names"},D=s("img",{class:"angle",src:A},null,-1),F={class:"sect"},H=s("input",{class:"click",type:"text",readonly:""},null,-1),M={tabindex:"0"},P=["onClick"],U={tabindex:"0"},G=["onClick"],N={tabindex:"0"},O=["onClick"],Q={class:v([{razd:!0}])},J={class:"sec"},K=["onClick"],Z=s("img",{src:C},null,-1),q={class:"items"},W=s("div",{class:"stat"},"\u0421\u0422\u0410\u0422\u042C\u0418",-1),X={class:"list_items"},Y=["onClick"];function $(n,o,d,e,i,c){return r(),_("div",null,[s("div",L,[s("div",z,[s("div",B,[R,s("span",V,h(e.sect.current_name.length>=14?e.sect.current_name.substring(0,17)+"...":e.sect.current_name),1),D]),s("div",F,[H,x(s("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>i.index_sort=t),onInput:o[1]||(o[1]=(...t)=>c.SEARCH&&c.SEARCH(...t)),class:"search_input",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0440\u0430\u0437\u0434\u0435\u043B\u0430"},null,544),[[w,i.index_sort]]),(r(!0),_(m,null,u(i.sort_section,t=>(r(),_("div",M,[s("div",{class:v([{ni:!0},{actIve:e.sect.current_section===t.id}]),onClick:a=>c.tp(t.id,t.name)},h(t.name.length>=24?t.name.substring(0,21)+"...":t.name),11,P),t.children.length>=1?(r(!0),_(m,{key:0},u(t.children,a=>(r(),_("div",U,[s("div",{class:v([{ni:!0},{actIve:e.sect.current_section===a.id}]),onClick:l=>c.tp(a.id,a.name)},"-"+h(a.name.length>=24?a.name.substring(0,21)+"...":a.name),11,G),a.children.length>=1?(r(!0),_(m,{key:0},u(a.children,l=>(r(),_("div",N,[s("div",{class:v([{ni:!0},{actIve:e.sect.current_section===l.id}]),onClick:tt=>c.tp(l.id,l.name)},"--"+h(l.name.length>=24?l.name.substring(0,21)+"...":l.name),11,O)]))),256)):f("",!0)]))),256)):f("",!0)]))),256))]),s("div",Q,[(r(!0),_(m,null,u(i.list_child,t=>(r(),_("div",J,[s("div",{onClick:a=>{g(p)("/"+e.teams.session_TeamCode+".itl.wiki/section/"+t.id),c.tp(t.id,t.name)},class:"sec"},[Z,s("p",null,h(t.name.length>=24?t.name.substring(0,21)+"...":t.name),1)],8,K)]))),256)),s("div",q,[W,s("div",X,[(r(!0),_(m,null,u(i.list_items,t=>(r(),_("div",{onClick:a=>{e.article.use_article(t.name,t.id),g(p)("/"+this.teams.session_TeamCode+".itl.wiki/section/"+this.sect.current_section+"/items/"+t.id)},class:v([{ittt:!0},{it_active:e.article.article_id===t.id}])}," \u25CF \xA0"+h(" "+t.name.length>=24?t.name.substring(0,21)+"...":t.name),11,Y))),256))])])])])])])}const lt=j(I,[["render",$]]);export{lt as _};
//# sourceMappingURL=section_window.67ebd6b3.js.map

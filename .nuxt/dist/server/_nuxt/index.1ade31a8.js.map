{"version":3,"file":"index.1ade31a8.js","sources":["../../../../pages/[name].itl.wiki/section/[id_section]/index.vue"],"sourcesContent":["<template>\r\n    <div >\r\n      <div>\r\n        <SectionWindow/>\r\n      <div @click=\"chain=chain?false:true\" class=\"chain\"><img src=\"@/assets/resourses/icons/chain.png\"></div>\r\n      <div @click=\"navigateTo('/'+teams.session_TeamCode+'.itl.wiki/section/'+sect.current_section+'/edit')\" class=\"iopn\"><img src=\"@/assets/resourses/icons/pencil.png\"></div>\r\n      <ChangingAccess :type_entity=\"2\" :id_entity=\"sect.current_section\" @click=\"chain=false\" @For_whom=\"edit_section\" :left=\"1200\" :top=\"42\"/>\r\n      <SHaRM v-if=\"chain\" :left=\"1300\" :top=\"90\" :left_arrw=\"385\" :type_entity=\"2\" :id_entity=\"this.sect.current_section\"/>\r\n        <div class=\"hhtii\">{{ link_sect }}</div>\r\n        <div class=\"tyurie3\">{{ sect.current_name }}</div>\r\n        <div class=\"decf5\">\r\n          <div class=\"ert83\">\r\n            Автор:&nbsp;<div class=\"yu89\">{{ fullname }}</div>&nbsp;\r\n          </div>\r\n          <div class=\"ert83\">\r\n            &nbsp;Обновлено:&nbsp; <div class=\"yu89\">{{ dateXXX }}</div>\r\n          </div> \r\n        </div>\r\n        <div v-if=\"content_section.length>=1&&content_section!=='.'\" class=\"sect_cov\" >\r\n         <p>{{ content_section }}</p>   <!--Тут содержание раздела-->\r\n        </div>      \r\n        <div class=\"ioko0\">  \r\n          <div class=\"block_it\" v-for=\"list of list_section\">\r\n            <img class=\"fold\" src=\"@/assets/resourses/icons/folder-max.png\">    <!--Раздел-->\r\n            <div class=\"no\">  <!--блок названия и описания-->\r\n              <div @click=\"tp(list.id, list.name)\" class=\"nm\">\r\n              {{ list.name }}\r\n            </div>\r\n            <div class=\"ob\">\r\n              Обновлено:&nbsp;<span >{{ import_date(list.updated_at) }}</span>\r\n            </div>\r\n            </div>\r\n          </div>\r\n          <div @click=\"article.use_article(list.name, list.id); navigateTo('/'+this.teams.session_TeamCode+'.itl.wiki/section/'+this.sect.current_section+'/items/'+list.id)\" class=\"block_it\" v-for=\"list of list_items\">      <!--Статья-->\r\n            <img class=\"file\" src=\"@/assets/resourses/icons/fold_full.png\">\r\n            <div class=\"no\">  <!--блок названия и описания-->\r\n              <div class=\"nm\">\r\n              {{ list.name }}\r\n            </div>\r\n            <div class=\"ob\">\r\n              Обновлено:&nbsp;<span>{{ import_date(list.updated_at) }}</span>\r\n            </div>\r\n            </div>\r\n           \r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { useSectionStore } from '~~/stores/SectionStore';\r\nimport { useThePrivateStore } from '~~/stores/private';\r\nimport { useTeamsStore } from '~~/stores/Teams';\r\nimport { useArticleStore } from '~~/stores/ArticleStore';\r\nimport { useDataUserStore } from '~~/stores/UserData';\r\ndefinePageMeta ({\r\n  layout: \"company\",\r\n  middleware: ['auth', 'team'],\r\n})\r\nexport default{\r\n  setup(){\r\n    const sect = useSectionStore()\r\n    const priv = useThePrivateStore()\r\n    const teams = useTeamsStore()\r\n    const article = useArticleStore()\r\n    const user = useDataUserStore()\r\n    var block_2 = ''\r\n    async function give_data () {\r\n      const url = new URL(\r\n    \"https://api.wiki.itl.systems/team/section/edit\"\r\n);\r\n    const url2 = new URL(\r\n      \"https://api.wiki.itl.systems/team/section\"\r\n    );\r\n\r\nconst params = {\r\n    \"team_id\": teams.session_TeamID,\r\n    \"section_id\": sect.current_section,\r\n};\r\nObject.keys(params)\r\n    .forEach(key => url.searchParams.append(key, params[key]));\r\n    Object.keys(params)\r\n    .forEach(key => url2.searchParams.append(key, params[key]));\r\n\r\nconst headers = {\r\n    \"Authorization\": \"Bearer \"+priv.token,\r\n    \"Content-Type\": \"application/json\",\r\n    \"Accept\": \"application/json\",\r\n};\r\n\r\n\r\n const w = await useFetch(url, {\r\n    method: \"GET\",\r\n    headers,\r\n})\r\nconst z = await useFetch(url2, {\r\n    method: \"GET\",\r\n    headers,\r\n})\r\n\r\nreturn ([w, z])    //w не доступна, доступ ограничивает предрегистрационные данные\r\n}\r\n  \r\n    return{sect, priv, teams, block_2, give_data, article, user}\r\n  },\r\n  created(){\r\n    setTimeout(()=>{this.info_items()}, 500);\r\n    setTimeout(()=>{this.give_data().then(r=>{\r\n      this.analyse_the_path(r[1])\r\n      this.content_section=r[0].data._rawValue.data.section.content\r\n    })}, 500)\r\n    this.info_pr()\r\n    this.add_p()\r\n  \r\n  },\r\n  data(){\r\n    return{\r\n     mass_sec: {},\r\n     fullname: '',\r\n     dateXXX: '',\r\n     list_items: [],\r\n     list_section: [] ,\r\n     content_section: '',\r\n     link_sect: '',\r\n     chain: false,\r\n     done: false\r\n\r\n    }\r\n  },\r\n  methods:{\r\n    async add_p(){\r\n      const url = new URL(\r\n    \"https://api.wiki.itl.systems/team/abilities\"\r\n);\r\n\r\nconst params = {\r\n    \"team_id\": this.teams.session_TeamID,\r\n    \"entity_id\": this.sect.current_section,\r\n    \"entity_type\": \"section\",\r\n};\r\nObject.keys(params)\r\n    .forEach(key => url.searchParams.append(key, params[key]));\r\n\r\nconst headers = {\r\n    \"Authorization\": \"Bearer \"+this.priv.token,\r\n    \"Content-Type\": \"application/json\",\r\n    \"Accept\": \"application/json\",\r\n};\r\n\r\n\r\nuseFetch(url, {\r\n    method: \"GET\",\r\n    headers,\r\n\r\n})\r\n    },\r\n    async info_pr(){\r\n      const url = new URL(\r\n    \"https://api.wiki.itl.systems/team/employees/get\"\r\n);\r\nlet params = {\r\n    \"team_id\": this.teams.session_TeamID,\r\n    \"employee_id\": this.user.userId,\r\n};\r\nObject.keys(params)\r\n    .forEach(key => url.searchParams.append(key, params[key]));\r\nconst headers = {\r\n    \"Authorization\": \"Bearer \"+this.priv.token,\r\n    \"Content-Type\": \"application/json\",\r\n    \"Accept\": \"application/json\",\r\n};\r\n\r\n\r\n\r\nuseFetch(url, {\r\n    method: \"GET\",\r\n    headers,\r\n \r\n})\r\n    },\r\n    analyse_the_path(w){\r\n      if(w.data._rawValue.data.section.level===1) {\r\n        this.link_sect=this.sect.current_name\r\n      }\r\n      else {\r\n      for (let a = 0; a<=w.data._rawValue.data.section.breadcrumbs.length-1; a++){\r\n        if (a===0) this.link_sect+=w.data._rawValue.data.section.breadcrumbs[0].name \r\n        else  this.link_sect+=\"/\"+w.data._rawValue.data.section.breadcrumbs[a].name\r\n      }\r\n      \r\n      }\r\n     \r\n    },\r\n    edit_section(type_action, userID){\r\n    this.sect.Edit_score(type_action, userID, 'section')\r\n    },\r\n    tp(id, name){\r\n            this.sect.close_sect()\r\n         this.sect.vie_sect(id, name)\r\n         window.location.href='/'+this.teams.session_TeamCode+'.itl.wiki/section/'+id\r\n        },\r\n    import_date(date){\r\n      var month = ['января','февраля','марта','апреля','мая','июня','июля','августа','сентября','октября','ноября','декабря']\r\n      let dateXXX= new Date(date)\r\n      dateXXX= dateXXX.getDay()+' '+month[dateXXX.getMonth()]+\" \"+\r\n      dateXXX.getHours()+\":\"+dateXXX.getMinutes()\r\n      return dateXXX\r\n    },\r\n    async info_items(){\r\n            const url = new URL(\r\n    \"https://api.wiki.itl.systems/team/section\"\r\n);\r\nconst params = {\r\n    \"team_id\": this.teams.session_TeamID,\r\n    \"section_id\": this.sect.current_section\r\n}\r\nObject.keys(params)\r\n    .forEach(key => url.searchParams.append(key, params[key]));\r\nconst headers = {\r\n    \"Authorization\": \"Bearer \"+this.priv.token,\r\n    \"Content-Type\": \"application/json\",\r\n    \"Accept\": \"application/json\",\r\n};\r\n\r\nconst w = await useFetch(url, {\r\n    method: \"GET\",\r\n    headers,\r\n})\r\n\r\nthis.mass_sec=w.data._rawValue.data.section\r\nfor (var p = 0; p<=this.mass_sec.items.length-1; p++){\r\n    if (this.mass_sec.items[p].status_id===3){\r\n        this.list_items.push(this.mass_sec.items[p])\r\n    }\r\n}\r\nthis.list_section = this.mass_sec.child\r\nthis.sect.vie_sect(this.mass_sec.id, this.mass_sec.name)\r\nthis.fullname=this.mass_sec.creator.fullname\r\nvar month = ['января','февраля','марта','апреля','мая','июня','июля','августа','сентября','октября','ноября','декабря']\r\nthis.dateXXX= new Date(this.mass_sec.updated_at)\r\nthis.dateXXX= this.dateXXX.getDate()+' '+month[this.dateXXX.getMonth()]+\" \"+\r\nthis.dateXXX.getHours()+\":\"+this.dateXXX.getMinutes() \r\n\r\n        },\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scored>\r\n@import \"@/assets/scss/font_family.scss\";\r\n.hhtii{\r\n  position: absolute;\r\n  left: 420px;\r\n  top: 60px;\r\n  font-size: 13px;\r\n  color: gray;\r\n  font-family: 'Roboto_regular';\r\n  cursor: pointer;\r\n  &:hover{\r\n    text-decoration: underline;\r\n  }\r\n}\r\n.ioko0{\r\n  position: relative;\r\n  display: flex;\r\n  flex-direction: column;\r\n  left: 410px;\r\n  top: 160px;\r\n  margin: 0px;\r\n  padding: 0px;\r\n  width: 880px;\r\n  font-family: 'Roboto_regular';\r\n  .block_it{\r\n    display: flex;\r\n    margin: 0px;\r\n    padding: 7px;\r\n    padding-bottom: 10px;\r\n    padding-top: 5px; \r\n    padding-left: 10px;\r\n    width: 100%;\r\n    height: 37px;\r\n    &:hover{\r\n      background-color: rgb(241, 246, 250);\r\n    }\r\n    img.file{\r\n      margin-top: 4px;\r\n      margin-left: 4px;\r\n      margin-right: 30px;\r\n    }\r\n    img.fold{\r\n      margin-right: 20px;\r\n      width: 38px;\r\n      height: 38px;\r\n    }\r\n    .no{\r\n      padding-top: 7px;\r\n      .nm{\r\n        font-size: 15px;\r\n        color: blue;\r\n        cursor: pointer;\r\n      }\r\n      .ob{\r\n        display: flex;\r\n        flex-wrap: nowrap;\r\n        font-size: 13px;\r\n        color: gray;\r\n\r\n        span{\r\n          color: rgb(77, 77, 77);\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.yu89{\r\n  color:rgb(65, 65, 65);\r\n}\r\n.tyurie3{\r\n  position: relative;\r\n  left: 410px;\r\n  top: 100px;\r\n  max-width: 800px;\r\n  font-size: 23px;\r\n  font-family: 'Roboto_regular';\r\n}\r\n.ert83{\r\n  display: flex;\r\n}\r\n.decf5{\r\n  display: flex;\r\n  flex-wrap: nowrap;\r\n  position: absolute;\r\n  left: 420px;\r\n  top: 160px;\r\n  font-size: 13px;\r\n  color: gray;\r\n  font-family: 'Roboto_regular';\r\n}\r\n.chain{\r\n  &:hover{\r\n    background-color: aliceblue;\r\n  }\r\n  cursor: pointer;\r\n  border-radius: 2px;\r\n  position: absolute;\r\n  left: 1285px;\r\n  top: 42px;\r\n  width: 35px;\r\n  height: 35px;\r\n  img{\r\n    margin-left: 8px;\r\n    margin-top: 8px;\r\n  }\r\n}\r\n.iopn{\r\n  &:hover{\r\n    background-color: aliceblue;\r\n  }\r\n  cursor: pointer;\r\n  border-radius: 2px;\r\n  position: absolute;\r\n  width: 35px;\r\n  height: 35px;\r\n  left: 1180px;\r\n  top: 43px;\r\n  img{\r\n    width: 20px;\r\n  height: 20px;\r\n  margin-left: 8px;\r\n    margin-top: 8px;\r\n  }\r\n}\r\n.sect_cov{\r\n  position: relative;\r\n  width: 900px;\r\n  top: 160px;\r\n  left: 413px;\r\n  font-family: 'Roboto_regular';\r\n  pointer-events: none;\r\n  p{\r\n    word-break: break-all;\r\n  }\r\n}\r\n</style>"],"names":["_sfc_main","url","url2","params","teams","sect","headers","priv","z","useFetch","w","r","a","type_action","userID","id","date","dateXXX","p","month","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_13","_hoisted_14","_imports_2","_hoisted_16","_hoisted_18","_imports_3","_hoisted_21","_hoisted_22","_hoisted_23","_cache","$event","$data","$options","_createElementVNode","_toDisplayString","$setup","_openBlock","_createElementBlock","_hoisted_12","list","_hoisted_17"],"mappings":"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"}
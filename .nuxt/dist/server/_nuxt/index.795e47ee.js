import{openBlock as u,createElementBlock as d,createElementVNode as n,toDisplayString as l,createVNode as h,unref as v,Fragment as f,renderList as g,createTextVNode as k,createStaticVNode as w}from"vue";import{_ as m}from"./_plugin-vue_export-helper.a1a6add7.js";import{c as r,n as C}from"../server.mjs";import{u as b,a as x,c as p}from"./private.7b9915f8.js";import"#internal/nitro";import"vue-router";const y={props:{text:{type:String}},data(){return{click:!1}},methods:{CL(){this.click=!0,this.$emit("click_button",this.click),setTimeout(()=>{this.click=!1},100)}}},T={class:"bt_s"};function $(e,t,c,a,i,s){return u(),d("div",null,[n("div",{onClick:t[0]||(t[0]=_=>s.CL()),class:"div_s"},[n("button",T,l(c.text),1)])])}const M=m(y,[["render",$]]);const E={setup(){const e=b(),t=x();return{teams:e,priv:t}},data(){return{list_user:[],current_team:[]}},mounted(){this.Get_list(),this.test_user()},methods:{async test_user(){const e=new URL("https://api.wiki.itl.systems/team"),t={team_id:this.teams.session_TeamID};Object.keys(t).forEach(s=>e.searchParams.append(s,t[s]));const c={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"},{data:a,error:i}=await p(e,{method:"GET",headers:c},"$iYK5MOpidd");if(a.value)this.current_team=a.value.data;else switch(i.value.statusCode){case 401:throw r({statusCode:401,statusMessage:"the session is over",fatal:!0});case 500:throw r({statusCode:500,statusMessage:"invalid request",fatal:!0});case 400:throw r({statusCode:400,statusMessage:"\u0417\u0430\u043F\u0440\u043E\u0441\u0443 \u043D\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445"});case 429:throw this.priv.Delete_token,r({statusCode:400,statusMessage:"\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u043D\u043E\u0433\u043E \u0437\u0430\u043F\u0440\u043E\u0441\u043E\u0432",fatal:!0})}},async Get_list(){const e=new URL("https://api.wiki.itl.systems/team/employees"),t={team_id:this.teams.session_TeamID,all:0};Object.keys(t).forEach(s=>e.searchParams.append(s,t[s]));const c={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"},{data:a,error:i}=await p(e,{method:"GET",headers:c},"$78Jr6I9xf6");if(a.value){this.list_user=a.value.data.employees;for(let s=0;s<=this.list_user.length;s++)if(!this.list_user[s].membership){[this.list_user[0],this.list_user[s]]=[this.list_user[s],this.list_user[0]];break}}else switch(i.value.statusCode){case 401:throw r({statusCode:401,statusMessage:"the session is over",fatal:!0});case 500:throw r({statusCode:500,statusMessage:"invalid request",fatal:!0});case 400:throw r({statusCode:400,statusMessage:"\u0417\u0430\u043F\u0440\u043E\u0441\u0443 \u043D\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442 \u0434\u0430\u043D\u043D\u044B\u0445"});case 429:throw this.priv.Delete_token,r({statusCode:400,statusMessage:"\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u043D\u043E\u0433\u043E \u0437\u0430\u043F\u0440\u043E\u0441\u043E\u0432",fatal:!0})}}}},j=w('<div class="sot"><p href="#">\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438 / \u0421\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0438</p></div><div class="add_s"><span>\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0430</span></div><div class="text_s"><span>\u0417\u0430 \u043A\u0430\u0436\u0434\u044B\u043C \u0443\u0441\u043F\u0435\u0445\u043E\u043C \u0441\u0442\u043E\u0438\u0442 \u043A\u043E\u043C\u0430\u043D\u0434\u0430! \u041F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u0435 \u0441\u0432\u043E\u044E \u043A\u043E\u043C\u0430\u043D\u0434\u0443 \u0438 \u043D\u0430\u0447\u043D\u0438\u0442\u0435 \u0441\u043E\u0437\u0434\u0430\u0432\u0430\u0442\u044C \u043E\u0442\u043B\u0438\u0447\u043D\u044B\u0435 \u0432\u0435\u0449\u0438 \u0432\u043C\u0435\u0441\u0442\u0435. </span></div><div class="list_s"><span>\u0421\u043F\u0438\u0441\u043E\u043A \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u043E\u0432</span></div><div class="tb_users"><div class="a"><span>\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C</span></div><div class="b"><span>\u041F\u043E\u0441\u043B\u0435\u0434\u043D\u044F\u044F \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u044C</span></div><div class="c"><span>\u0421\u0442\u0430\u0442\u0443\u0441</span></div></div>',5),V={class:"list_user"},B={class:"user_teams"},D={class:"initials"},L={class:"email"},S={class:"log"},A={class:"state"},G={class:"role"};function N(e,t,c,a,i,s){const _=M;return u(),d("div",null,[h(_,{onClick_button:t[0]||(t[0]=o=>v(C)("/"+a.teams.session_TeamCode+".itl.wiki/setting/emplayees/add")),text:"\u041F\u0440\u0438\u0433\u043B\u0430\u0441\u0438\u0442\u044C \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u0439"}),j,n("div",V,[(u(!0),d(f,null,g(i.list_user,o=>(u(),d("div",B,[n("div",D,[k(l(o.fullname)+" ",1),n("div",L,l(o.email),1)]),n("div",S,l(o.logged_in),1),n("div",A,l(o.membership?"\u0412\u044B\u0434\u0430\u043D \u0434\u043E\u0441\u0442\u0443\u043F":""),1),n("div",G,l(o.membership?o.membership.role===i.current_team.team.roles[0].id?"\u0410\u0434\u043C\u0438\u043D":o.membership.role===i.current_team.team.roles[1].id?"\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440":"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C":"\u0412\u043B\u0430\u0434\u0435\u043B\u0435\u0446"),1)]))),256))])])}const F=m(E,[["render",N]]);export{F as default};
//# sourceMappingURL=index.795e47ee.js.map

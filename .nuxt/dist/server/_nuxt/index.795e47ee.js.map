{"version":3,"file":"index.795e47ee.js","sources":["../../../../components/UI/button_unVis.vue","../../../../pages/[name].itl.wiki/setting/emplayees/index.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div @click=\"CL()\" class=\"div_s\"><button class=\"bt_s\">{{ text }}</button></div>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default{\r\n    props:{\r\n        text:{\r\n            type: String\r\n        }\r\n    },\r\n    data(){\r\n        return{\r\n        click: false\r\n        }\r\n    },\r\n    methods:{\r\n        CL() {\r\n          this.click=true\r\n          this.$emit('click_button', this.click)\r\n          setTimeout(()=>{this.click=false}, 100)\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\" scored>\r\n@import \"@/assets/scss/font_family.scss\";\r\n.div_s{\r\nposition: absolute;\r\nleft: 430px;\r\ntop: 200px;\r\n};\r\n.bt_s{\r\n    width: 250px;\r\n    height: 50px;\r\n    background-color: rgb(1, 1, 1, 0);\r\n    border: 1px solid #6199e7;\r\n    border-radius: 1px;\r\n    color: #0b55bb;\r\n    font-family: 'Roboto_regular';\r\n    font-size: 15px;\r\n    cursor: pointer;\r\n    &:hover{\r\n    background-color: blue;\r\n    color: white;\r\n    transition: 0.5s;\r\n    }\r\n} \r\n</style>","<template>\r\n    <div>\r\n        <ButtonUnVis @click_button=\"navigateTo('/'+teams.session_TeamCode+'.itl.wiki/setting/emplayees/add')\" :text=\"'Пригласить пользователей'\"/>  \r\n       <div class=\"sot\"><p href='#'>Настройки / Сотрудники</p></div> \r\n       <div class=\"add_s\"><span >Добавление сотрудника</span></div>\r\n       <div class=\"text_s\"><span >За каждым успехом стоит команда!\r\n          Пригласите свою команду и начните создавать отличные вещи вместе. </span></div>          \r\n        <div class=\"list_s\"><span >Список сотрудников</span></div>   \r\n        <div class=\"tb_users\">\r\n            <div class=\"a\"><span>Пользователь</span></div>\r\n            <div class=\"b\"><span>Последняя активность</span></div>\r\n            <div class=\"c\"><span>Статус</span></div>\r\n        </div>                               \r\n        <div class=\"list_user\">\r\n        <div class=\"user_teams\" v-for=\"list of list_user\">\r\n        <div class=\"initials\">\r\n       {{ list.fullname }}\r\n        <div class=\"email\">{{ list.email }}</div>\r\n        </div>\r\n        <div class=\"log\">{{ list.logged_in }}</div>\r\n        <div class=\"state\">{{ list.membership?'Выдан доступ':'' }}</div>\r\n        <div class=\"role\">{{ list.membership?(list.membership.role===current_team.team.roles[0].id?'Админ':\r\n        (list.membership.role===current_team.team.roles[1].id?'Модератор':'Пользователь')):\"Владелец\" }}</div>\r\n       </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { useTeamsStore } from '~~/stores/Teams';\r\nimport { useThePrivateStore } from '~~/stores/private';\r\ndefinePageMeta ({\r\n  layout: \"company\",\r\n  middleware: ['auth', 'team'],\r\n})\r\nexport default {\r\n   setup(){\r\n    const teams = useTeamsStore()\r\n    const priv = useThePrivateStore()\r\n    return{teams, priv}\r\n   },\r\n   data() {\r\n    return{\r\n     list_user: [],\r\n     current_team: []\r\n    }\r\n   },\r\n   mounted(){\r\n    this.Get_list()\r\n    this.test_user()\r\n   },\r\n   methods:{\r\n    async test_user () {\r\n        const url = new URL(\r\n    \"https://api.wiki.itl.systems/team\"\r\n);\r\n\r\nconst params = {\r\n    \"team_id\": this.teams.session_TeamID,\r\n};\r\nObject.keys(params)\r\n    .forEach(key => url.searchParams.append(key, params[key]));\r\n\r\nconst headers = {\r\n    \"Authorization\": \"Bearer \"+this.priv.token,\r\n    \"Content-Type\": \"application/json\",\r\n    \"Accept\": \"application/json\",\r\n\r\n};\r\n\r\n\r\nconst {data, error} = await useFetch(url, {\r\n    method: \"GET\",\r\n    headers,\r\n})\r\nif (data.value){\r\nthis.current_team=data.value.data\r\n}else{\r\n    switch (error.value.statusCode) {\r\n    case 401: throw createError({ statusCode: 401, statusMessage: 'the session is over', fatal: true })\r\n    break;\r\n    case 500: throw createError({ statusCode: 500, statusMessage: 'invalid request', fatal: true })\r\n    break;\r\n    case 400: throw createError({ statusCode: 400, statusMessage: 'Запросу не хватает данных'})\r\n    break;\r\n    case 429: this.priv.Delete_token;\r\n              throw createError({ statusCode: 400, statusMessage: 'Слишком много запросов', fatal: true})\r\n              break;\r\n}\r\n}\r\n\r\n    },\r\n    async Get_list () {\r\n\r\n        const url = new URL(\r\n    \"https://api.wiki.itl.systems/team/employees\"\r\n);\r\n\r\nconst params = {\r\n    \"team_id\": this.teams.session_TeamID,\r\n    \"all\": 0,\r\n    // \"limit\": \"2\",\r\n    // \"offset\": \"30\",\r\n    // \"order_by\": \"created_a\",\r\n    // \"order_sort\": \"ASC\",\r\n    \r\n};\r\nObject.keys(params)\r\n    .forEach(key => url.searchParams.append(key, params[key]));\r\n\r\nconst headers = {\r\n    \"Authorization\": \"Bearer \"+this.priv.token,\r\n    \"Content-Type\": \"application/json\",\r\n    \"Accept\": \"application/json\",\r\n};\r\n\r\nconst {data, error} = await useFetch(url, {\r\n    method: \"GET\",\r\n    headers,\r\n})\r\nif  (data.value){\r\nthis.list_user = data.value.data.employees;\r\nfor (let a = 0; a<=this.list_user.length; a++) {\r\n    if (!(this.list_user[a].membership)) {\r\n        [this.list_user[0], this.list_user[a]] = [this.list_user[a], this.list_user[0]];\r\n        break;\r\n    }\r\n}\r\n}else{\r\n    switch (error.value.statusCode) {\r\n    case 401: throw createError({ statusCode: 401, statusMessage: 'the session is over', fatal: true })\r\n    break;\r\n    case 500: throw createError({ statusCode: 500, statusMessage: 'invalid request', fatal: true })\r\n    break;\r\n    case 400: throw createError({ statusCode: 400, statusMessage: 'Запросу не хватает данных'})\r\n    break;\r\n    case 429: this.priv.Delete_token;\r\n              throw createError({ statusCode: 400, statusMessage: 'Слишком много запросов', fatal: true})\r\n              break;\r\n}\r\n}\r\n    }\r\n   }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n@import \"assets/scss/font_family.scss\";\r\n.log{\r\n    width: 230px;\r\n}\r\n.user_teams{\r\n    font-family: 'Roboto_regular';\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    flex-wrap: nowrap;\r\n    flex-direction: row;\r\n    color: #414141;\r\n    font-size: 14px;\r\n    width: 900px;\r\n    height: 70px;\r\n    \r\n}\r\n.role{\r\n    color: blue;\r\n}\r\n.state{\r\n    width: 200px;\r\n}\r\n.initials{\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 290px;\r\n}\r\n    .email{\r\n        margin-top: 5px;\r\n        font-size: 11px;\r\n        color: #999999;\r\n    }\r\n\r\n.list_user{\r\n    display: flex;\r\n    flex-direction: column;   \r\n    position: absolute;\r\n    flex-wrap: nowrap;\r\n    width: 900px;\r\n    height: 40%;\r\n    left: 430px;\r\n    top: 480px;\r\n}\r\n.sot{\r\n    position: absolute;\r\n    width: 300px;\r\n    height: 20px;\r\n    left: 430px;\r\n    top: 30px;\r\n    text-decoration: none;\r\n    cursor: pointer;\r\n    font-family: \"Roboto_regular\";\r\n    font-size: 13px;\r\n    color: #999999;\r\n}\r\n.add_s{\r\nposition: absolute;\r\nwidth: 300px;\r\nleft: 430px;\r\ntop: 90px;\r\nfont-family: \"Roboto_regular\";\r\nfont-size: 20px;\r\n}\r\n.text_s{\r\nposition: absolute;\r\nwidth: 480px;\r\nleft: 430px;\r\ntop: 140px;\r\nline-height: 1.5;\r\nfont-family: \"Roboto_regular\";\r\ncolor: rgb(87, 87, 87);\r\nfont-size: 13px;\r\n}\r\n.list_s{\r\nposition: absolute;\r\nwidth: 300px;\r\nleft: 430px;\r\ntop: 300px;\r\nfont-family: \"Roboto_regular\";\r\nfont-size: 20px;\r\ncolor: rgb(39, 39, 39)\r\n}\r\n.tb_users{\r\n    position: absolute;\r\nwidth: 900px;\r\nheight: 40px;\r\npadding: 0px;\r\nmargin: 0px;\r\nleft: 420px;\r\ntop: 380px;\r\nfont-family: \"Roboto_regular\";\r\nfont-size: 13px;\r\ncolor: #999999;\r\nborder-bottom: 1px  solid #cacaca;\r\n.a{\r\n    position: absolute;\r\n    left: 10px;\r\n    top: 13px;\r\n}\r\n.b{\r\n    position: absolute;\r\n    left: 300px;\r\n    top: 13px;\r\n}\r\n.c{\r\n    position: absolute;\r\n    left: 530px;\r\n    top: 13px;\r\n}\r\n}\r\n</style>"],"names":["_sfc_main","_hoisted_1","_createElementBlock","_createElementVNode","$options","_toDisplayString","$props","teams","priv","url","params","headers","data","error","useFetch","createError","a","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_cache","$event","_unimport_unref_","_unimport_navigateTo","$setup","_openBlock","list","$data"],"mappings":"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"}
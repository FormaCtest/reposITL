import{_ as x}from"./user_window.f1e8adfd.js";import{u as y,a as v,b as c}from"./private.d82c0789.js";import{a as b,o as u,b as _,e as t,w as d,v as h,f as l,h as m,i as w,j as f,t as k,k as T,l as j}from"./entry.19428e20.js";import{_ as A}from"./analysis.b73d4268.js";import"./NavbarStore.7e812d0d.js";import"./bookmark.45d77398.js";import"./pencil.90349105.js";import"./sign.d295011a.js";const U={props:{top:{type:Number},left:{type:Number},width:{type:Number},placeholder:{type:String},error:{type:Boolean},update:{type:Boolean}},setup(){const o=y(),e=v();return{priv:o,user:e}},data(){return{link:this.user.userEmail,test:!1}},mounted(){setTimeout(()=>{this.$emit("create",this.link)},300)},methods:{test1(){this.link.length>=7&&(this.test=!0,setTimeout(()=>{this.test=!1},150),this.$emit("create",this.link))}}},S=["placeholder"],E={key:0,class:"analys",src:A},V={key:1,class:"un_data"};function B(o,e,i,a,s,n){return u(),_("div",null,[t("div",{class:"in",style:w([{top:i.top+"px"},{left:i.left+"px"},{width:i.width+"px"}])},[d(t("input",{class:l([{error:i.error},{update:i.update}]),onInput:e[0]||(e[0]=p=>n.test1()),"onUpdate:modelValue":e[1]||(e[1]=p=>s.link=p),type:"text",placeholder:i.placeholder},null,42,S),[[h,s.link]]),s.test?(u(),_("img",E)):m("",!0),i.error?(u(),_("span",V,"\u041D\u0435\u043A\u043A\u043E\u0440\u0435\u043A\u0442\u043D\u043E \u0432\u0432\u0435\u0434\u0435\u043D\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435")):m("",!0)],4)])}const C=b(U,[["render",B]]);const N={setup(){const o=y(),e=v();return{priv:o,user:e}},created(){this.user.TakingData(),this.info_user()},data(){return{name:this.user.userName,subname:this.user.userSubname,email:"",password:"",old_password:"",double_password:"",new_password:"",error:!1,un_ps:!1,error_double:!1,error_length:!1,alert_error:"",server_error:!1,UserData:"",update:!1,url_img:!1}},methods:{async info_user(){const o=new URL("https://api.wiki.itl.systems/account"),e={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"};await c(o,{method:"GET",headers:e},"$V1bAxW5ezS").then(i=>{const a=new URL("https://api.wiki.itl.systems/editor/fetch/url");var s={url:"https://api.wiki.itl.systems/assets/img/user.jpg"};Object.keys(s).forEach(p=>a.searchParams.append(p,s[p]));const n={Authorization:"Bearer "+this.priv.token,Accept:"application/json"};c(a,{method:"GET",headers:n},"$BT4qtHLmAI")})},save_name(){if(this.name===""||this.subname===""||this.email==="")this.error=!0;else if(this.email.search(/[A-Z0-9._%+-]+@[A-Z0-9-]+\.[A-Z]{2,4}/igm)===-1)this.error=!0;else{const o=new URL("https://api.wiki.itl.systems/account/common/edit"),e={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"};let i={first_name:this.name,last_name:this.subname,email:this.email};c(o,{method:"POST",headers:e,body:JSON.stringify(i)},"$nXE0ypWlxU"),this.update=!0,setTimeout(()=>{this.update=!1},500)}},async save_img(o){const e=new FormData;e.append("image",o.target.files[0]);const i=new URL("https://api.wiki.itl.systems/account/picture/change"),a={Authorization:"Bearer "+this.priv.token,Accept:"application/json"};c(i,{method:"POST",headers:a,body:e},"$2IjQZHHs43")},Reload(){this.un_ps=!1,this.error_double=!1,this.error_length=!1,this.server_error=!1},async EditPassword(){const o=new URL("https://api.wiki.itl.systems/account/password/change"),e={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"};let i={password:this.old_password,new_password:this.new_password};const a=await c(o,{method:"POST",headers:e,body:JSON.stringify(i)},"$XWdfjGC5QW");if(a.error.value!==null)switch(a.error._rawValue.message.substring(0,3)){case"400":this.un_ps=!0,this.server_error=!0,this.alert_error="\u0432\u0432\u0435\u0434\u0435\u043D \u043D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C",this.old_password="",this.double_password="",this.new_password="";break;case"401":this.un_ps=!0,this.server_error=!0,this.alert_error="\u0441\u0435\u0441\u0441\u0438\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0430, \u043F\u0435\u0440\u0435\u0437\u0430\u0439\u0434\u0438\u0442\u0435",this.old_password="",this.double_password="",this.new_password="";break}else this.old_password="",this.double_password="",this.new_password="",this.update=!0,setTimeout(()=>{this.update=!1},500)},savEm(o){this.email=o,this.error=!1},async save_password(){this.new_password!==this.double_password?(this.un_ps=!0,this.error_double=!0,this.old_password="",this.double_password="",this.new_password=""):this.new_password.length<=5||this.double_password.length<=5?(this.un_ps=!0,this.error_length=!0,this.old_password="",this.double_password="",this.new_password=""):this.EditPassword()}}},P={class:"container"},I=t("div",{class:"bY"},[t("a",{href:"#"},"\u041F\u0440\u043E\u0444\u0438\u043B\u044C"),j(" / "),t("a",{href:"#"}," \u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435")],-1),R=t("div",{class:"my_data"},"\u041B\u0438\u0447\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435 ",-1),z={class:l([{in:!0},{name_input:!0}])},D={class:l([{in:!0},{subname_input:!0}])},L={class:"button",style:{width:"200px"}},O=t("div",{class:"my_data",style:{top:"535px"}},"\u0411\u0435\u0437\u043E\u043F\u0430\u0441\u043D\u043E\u0441\u0442\u044C",-1),G={class:"in",style:{top:"540px"}},W={class:"in",style:{top:"616px"}},Z={class:"in",style:{top:"692px"}},H={key:0,class:"double_text"},F={key:1,class:"double_text"},J={key:2,class:"double_text"},M={class:"button",style:w([{width:"200px"},{top:"860px"}])},Q={class:"img_loading"},X=["src"],q=t("p",null,"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0440\u0430\u0437\u043C\u0435\u0440\u043E\u043C \u043D\u0435 \u043C\u0435\u043D\u0435\u0435 256 \u043D\u0430 256 \u043F\u0438\u043A\u0441\u0435\u043B\u0435\u0439 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 .jpg \u0438\u043B\u0438 .png",-1),Y=t("label",{class:"rows",for:"row",style:{cursor:"pointer"}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0444\u043E\u0442\u043E",-1),K={id:"addPhoto"};function $(o,e,i,a,s,n){const p=x,g=C;return u(),_("div",null,[t("div",P,[f(p),I,R,t("div",null,[t("div",z,[d(t("input",{onInput:e[0]||(e[0]=r=>this.error=!1),class:l([{error:s.error},{update:s.update}]),style:w([{width:"475px"},{top:"100"}]),"onUpdate:modelValue":e[1]||(e[1]=r=>s.name=r),type:"text",placeholder:"\u0418\u043C\u044F"},null,34),[[h,s.name]])]),t("div",D,[d(t("input",{onInput:e[2]||(e[2]=r=>this.error=!1),class:l([{error:s.error},{update:s.update}]),style:w([{width:"475px"},{top:"176"}]),"onUpdate:modelValue":e[3]||(e[3]=r=>s.subname=r),placeholder:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"},null,34),[[h,s.subname]])]),f(g,{update:s.update,error:s.error,onCreate:n.savEm,top:250,left:410,width:475,placeholder:"email"},null,8,["update","error","onCreate"]),t("button",L,[t("span",{class:"create_text",onClick:e[4]||(e[4]=r=>n.save_name())},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438")])]),O,t("div",G,[d(t("input",{onInput:e[5]||(e[5]=r=>n.Reload()),class:l([{error:s.un_ps},{update:s.update}]),"onUpdate:modelValue":e[6]||(e[6]=r=>s.old_password=r),style:{width:"475px"},type:"password",placeholder:"\u0422\u0435\u043A\u0443\u0449\u0438\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"},null,34),[[h,s.old_password]])]),t("div",W,[d(t("input",{onInput:e[7]||(e[7]=r=>n.Reload()),class:l([{error:s.un_ps},{update:s.update}]),"onUpdate:modelValue":e[8]||(e[8]=r=>s.new_password=r),style:{width:"475px"},type:"password",placeholder:"\u041D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u043E\u043B\u044C"},null,34),[[h,s.new_password]])]),t("div",Z,[d(t("input",{onInput:e[9]||(e[9]=r=>n.Reload()),class:l([{error:s.un_ps},{update:s.update}]),"onUpdate:modelValue":e[10]||(e[10]=r=>s.double_password=r),style:{width:"475px"},type:"password",placeholder:"\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C"},null,34),[[h,s.double_password]]),s.error_double?(u(),_("span",H,"\u041F\u0430\u0440\u043E\u043B\u0438 \u043D\u0435 \u0441\u043E\u0432\u043F\u0430\u0434\u0430\u044E\u0442")):m("",!0),s.error_length?(u(),_("span",F,"\u041C\u0438\u043D\u0438\u043C\u0430\u043B\u044C\u043D\u0430\u044F \u0434\u043B\u0438\u043D\u0430 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432")):m("",!0),s.server_error?(u(),_("span",J,k(s.alert_error),1)):m("",!0)]),t("button",M,[t("span",{class:"create_text",onClick:e[11]||(e[11]=r=>n.save_password())},"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u043D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438")]),t("div",Q,[t("img",{src:s.url_img},null,8,X),q])]),Y,t("form",K,[d(t("input",{onChange:e[12]||(e[12]=r=>n.save_img(r)),type:"file",id:"row",ref:"file",accept:".png, .jpeg, .jpg"},null,544),[[T,!1]])])])}const le=b(N,[["render",$]]);export{le as default};

import{_ as C}from"./section_window.2bf8db6b.js";import{_ as E}from"./changing_access.27dfb36f.js";import{_ as V,a as x}from"./chain.0fca7cf4.js";import{a as A,b as d,e as s,j as y,u as k,c as D,h as w,t as c,l as h,F as X,E as g,o as r,m as T}from"./entry.19428e20.js";import{u as S,d as B,a as P,b as p}from"./private.d82c0789.js";import{u as U}from"./SectionStore.763b80b6.js";import{u as z}from"./ArticleStore.89b32673.js";import{_ as F}from"./pencil.90349105.js";import{_ as G}from"./folder-max.65e98ccd.js";import{_ as I}from"./fold_full.ee363041.js";import"./NavbarStore.7e812d0d.js";import"./folder.dc2c6812.js";const L={setup(){const e=U(),t=S(),o=B(),a=z(),i=P();var _="";async function l(){const u=new URL("https://api.wiki.itl.systems/team/section/edit"),f=new URL("https://api.wiki.itl.systems/team/section"),n={team_id:o.session_TeamID,section_id:e.current_section};Object.keys(n).forEach(m=>u.searchParams.append(m,n[m])),Object.keys(n).forEach(m=>f.searchParams.append(m,n[m]));const v={Authorization:"Bearer "+t.token,"Content-Type":"application/json",Accept:"application/json"},b=await p(u,{method:"GET",headers:v},"$fJ8ooyZyju"),j=await p(f,{method:"GET",headers:v},"$NoVdoWyjtF");return[b,j]}return{sect:e,priv:t,teams:o,block_2:_,give_data:l,article:a,user:i}},created(){setTimeout(()=>{this.info_items()},500),setTimeout(()=>{this.give_data().then(e=>{this.analyse_the_path(e[1]),this.content_section=e[0].data._rawValue.data.section.content})},500),this.info_pr(),this.add_p()},data(){return{mass_sec:{},fullname:"",dateXXX:"",list_items:[],list_section:[],content_section:"",link_sect:"",chain:!1,done:!1}},methods:{async add_p(){const e=new URL("https://api.wiki.itl.systems/team/abilities"),t={team_id:this.teams.session_TeamID,entity_id:this.sect.current_section,entity_type:"section"};Object.keys(t).forEach(a=>e.searchParams.append(a,t[a]));const o={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"};p(e,{method:"GET",headers:o},"$lGi14KNwg4")},async info_pr(){const e=new URL("https://api.wiki.itl.systems/team/employees/get");let t={team_id:this.teams.session_TeamID,employee_id:this.user.userId};Object.keys(t).forEach(a=>e.searchParams.append(a,t[a]));const o={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"};p(e,{method:"GET",headers:o},"$ekjUECKIbn")},analyse_the_path(e){if(e.data._rawValue.data.section.level===1)this.link_sect=this.sect.current_name;else for(let t=0;t<=e.data._rawValue.data.section.breadcrumbs.length-1;t++)t===0?this.link_sect+=e.data._rawValue.data.section.breadcrumbs[0].name:this.link_sect+="/"+e.data._rawValue.data.section.breadcrumbs[t].name},edit_section(e,t){this.sect.Edit_score(e,t,"section")},tp(e,t){this.sect.close_sect(),this.sect.vie_sect(e,t),window.location.href="/"+this.teams.session_TeamCode+".itl.wiki/section/"+e},import_date(e){var t=["\u044F\u043D\u0432\u0430\u0440\u044F","\u0444\u0435\u0432\u0440\u0430\u043B\u044F","\u043C\u0430\u0440\u0442\u0430","\u0430\u043F\u0440\u0435\u043B\u044F","\u043C\u0430\u044F","\u0438\u044E\u043D\u044F","\u0438\u044E\u043B\u044F","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F","\u043E\u043A\u0442\u044F\u0431\u0440\u044F","\u043D\u043E\u044F\u0431\u0440\u044F","\u0434\u0435\u043A\u0430\u0431\u0440\u044F"];let o=new Date(e);return o=o.getDay()+" "+t[o.getMonth()]+" "+o.getHours()+":"+o.getMinutes(),o},async info_items(){const e=new URL("https://api.wiki.itl.systems/team/section"),t={team_id:this.teams.session_TeamID,section_id:this.sect.current_section};Object.keys(t).forEach(l=>e.searchParams.append(l,t[l]));const o={Authorization:"Bearer "+this.priv.token,"Content-Type":"application/json",Accept:"application/json"},a=await p(e,{method:"GET",headers:o},"$05929PH4z3");this.mass_sec=a.data._rawValue.data.section;for(var i=0;i<=this.mass_sec.items.length-1;i++)this.mass_sec.items[i].status_id===3&&this.list_items.push(this.mass_sec.items[i]);this.list_section=this.mass_sec.child,this.sect.vie_sect(this.mass_sec.id,this.mass_sec.name),this.fullname=this.mass_sec.creator.fullname;var _=["\u044F\u043D\u0432\u0430\u0440\u044F","\u0444\u0435\u0432\u0440\u0430\u043B\u044F","\u043C\u0430\u0440\u0442\u0430","\u0430\u043F\u0440\u0435\u043B\u044F","\u043C\u0430\u044F","\u0438\u044E\u043D\u044F","\u0438\u044E\u043B\u044F","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F","\u043E\u043A\u0442\u044F\u0431\u0440\u044F","\u043D\u043E\u044F\u0431\u0440\u044F","\u0434\u0435\u043A\u0430\u0431\u0440\u044F"];this.dateXXX=new Date(this.mass_sec.updated_at),this.dateXXX=this.dateXXX.getDate()+" "+_[this.dateXXX.getMonth()]+" "+this.dateXXX.getHours()+":"+this.dateXXX.getMinutes()}}},N=s("img",{src:x},null,-1),R=[N],M=s("img",{src:F},null,-1),O=[M],H={class:"hhtii"},K={class:"tyurie3"},W={class:"decf5"},J={class:"ert83"},Z={class:"yu89"},q={class:"ert83"},Q={class:"yu89"},Y={key:1,class:"sect_cov"},$={class:"ioko0"},tt={class:"block_it"},et=s("img",{class:"fold",src:G},null,-1),st={class:"no"},it=["onClick"],nt={class:"ob"},ot=["onClick"],at=s("img",{class:"file",src:I},null,-1),ct={class:"no"},_t={class:"nm"},rt={class:"ob"};function lt(e,t,o,a,i,_){const l=C,u=E,f=V;return r(),d("div",null,[s("div",null,[y(l),s("div",{onClick:t[0]||(t[0]=n=>i.chain=!i.chain),class:"chain"},R),s("div",{onClick:t[1]||(t[1]=n=>k(T)("/"+a.teams.session_TeamCode+".itl.wiki/section/"+a.sect.current_section+"/edit")),class:"iopn"},O),y(u,{type_entity:2,id_entity:a.sect.current_section,onClick:t[2]||(t[2]=n=>i.chain=!1),onFor_whom:_.edit_section,left:1200,top:42},null,8,["id_entity","onFor_whom"]),i.chain?(r(),D(f,{key:0,left:1300,top:90,left_arrw:385,type_entity:2,id_entity:this.sect.current_section},null,8,["id_entity"])):w("",!0),s("div",H,c(i.link_sect),1),s("div",K,c(a.sect.current_name),1),s("div",W,[s("div",J,[h(" \u0410\u0432\u0442\u043E\u0440:\xA0"),s("div",Z,c(i.fullname),1),h("\xA0 ")]),s("div",q,[h(" \xA0\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E:\xA0 "),s("div",Q,c(i.dateXXX),1)])]),i.content_section.length>=1&&i.content_section!=="."?(r(),d("div",Y,[s("p",null,c(i.content_section),1)])):w("",!0),s("div",$,[(r(!0),d(X,null,g(i.list_section,n=>(r(),d("div",tt,[et,s("div",st,[s("div",{onClick:v=>_.tp(n.id,n.name),class:"nm"},c(n.name),9,it),s("div",nt,[h(" \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E:\xA0"),s("span",null,c(_.import_date(n.updated_at)),1)])])]))),256)),(r(!0),d(X,null,g(i.list_items,n=>(r(),d("div",{onClick:v=>{a.article.use_article(n.name,n.id),k(T)("/"+this.teams.session_TeamCode+".itl.wiki/section/"+this.sect.current_section+"/items/"+n.id)},class:"block_it"},[at,s("div",ct,[s("div",_t,c(n.name),1),s("div",rt,[h(" \u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E:\xA0"),s("span",null,c(_.import_date(n.updated_at)),1)])])],8,ot))),256))])])])}const Tt=A(L,[["render",lt]]);export{Tt as default};
